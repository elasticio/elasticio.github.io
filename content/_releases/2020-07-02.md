---
title: Product Update - v20.27
description: Details of the product update v20.27 from 2nd of July 2020.
layout: rel
version: "20.27"
section: Product Updates
category: product-updates
releaseDate: 2020-07-02
---

## Features

### Custom error handling in flows

We introduce a new concept for error handling in the integration flows. Now you
have a possibility to choose what to do with errors. In short you can handle
those errors by building a workflow to catch them and store them in a most
convenient way for you.

Before you would get error reports when you subscribe to receive them per email
or if you would constantly checking your flows for errors on the platform UI by
logging in.

Now you can do both of these if you still prefer it, but you can proactively handle
those errors and decide what should happen with these errors and who should handle
them.

To use and customise error handling choose the icon presented in the right bottom
of the flow designer page after you configure the first step in the flow.

![Add Error Handling](/assets/img/RN/2027/add-error-handling.png "Add Error Handling")

You can choose to configure it right away of wait when you finish the flow design
and configure it to handle errors in one go since
**only one error handling is supported in this version**.

Here is how the completed flow with error handling would look. Note, it handled
the error in the third step.

![Handling Errors](/assets/img/RN/2027/handling-errors-result.png "Handling Errors")


> The Node.js Sailor `2.6.13+` version is required for this mechanism to work, therefore,
> we recommend upgrading your custom components accordingly.

We have a separate dedicated page describing custom error handling.

### Preconditions and Limitations

> The Node.js Sailor `2.6.13+` version is required for this mechanism to work, therefore,
> we recommend upgrading your custom components accordingly.

This version of custom error handling handles only certain use cases and errors.
It is still not able to handle:

*   "Container failed to start" by request-reply as error handler. It causes request timeout on webhook.
*   "Container failed to start" original error messages.
*   If your component is not using a system-wide mapper component right before to map the fields, then you must upgrade the Node.js Sailor to at least `2.6.13` version.
*   At this moment the components which do not require mapper component input to function would not show in the components list to choose from to map.

Custom error handler support in Flow Designer:

Only 1 error handling is supported for now, icon is located at the right bottom corner and is visible at all times except if user is in version mode of designer and that version does not have any custom error handling
Custom error handing step configuration has an icon of the chosen node in the step summary and in the header, instead of the general icon (BUT, on the graph the icon never changes)
The incoming hardcoded sample:
{
    error: {
        message: 'Error message',
        name: 'Error name',
        stack: 'Error stack trace'
    },
    errorInput: {
        properties: {
            headers: {}
        },
        content: {
            headers: {},
            body: {}
        }
    }
}

## Improvements

### Secrets Management Service Improvements

We continue our improvements and developments of the New Secrets Management
service. In this round we worked on authentication parameters.

- Auth-client's for oauth2 is now support auth_uri and token_uri.
Auth-clients for oAuth2 supports auth_uri and token_uri attributes in credentials. Notice: API-requests for auth-client were changed. API-docs: https://api.elastic.io/docs/v2/#auth-clients-(experimental)

- Faceless should refresh token slightly BEFORE expiry.
Trigger token refresh 60 seconds earlier than expires_in data.

- Faceless should set token_expires_in from auth clients to secrets expires_in on create.
Now when you create new secret which linked to auth-client with token_expires_in attribute the data for expires_in attribute in secret will be taken from the token_expires_in data.

### Request-reply Response Code

- As an Intergator I want to configure response code in request-reply component.
New version of request-reply-component 1.1.0

We added response code field into Component Input section. Response code is passed in the reply message header. Response code is 200 by default.


## Fixed Bugs

*   Fixes the problem

- Just created credential disappears from the list until refreshing the page
- Pub/Sub Topic shcema generator adds empty "title" property
- Problem in UI mapper with objects in arrays.
If the metadata has an object inside an array, it was not possible to set/change values in this object using UI mapper.

- There is a problem with editing an auth-secret after using not valid auth-client.
- Frontend crash when trying to cancel unexisting consumerTag (subscriptionManager onDisconnect).
- Iron bank killed by kubernetes due to failed healthchecks.

## Components

### [Code component](/components/code)

*   **UPDATED** - Node.js Sailor was updated to `2.6.13`.

### [Mapper component](/components/mapper)

*   **UPDATED** - Node.js Sailor was updated to `2.6.13`.

### [MongoDB Component](/components/mongodb)

*   **UPDATED** - component updated to use Node v14 and the dependencies are updated accordingly.
*   **UPDATED** - Node.js Sailor was updated to `2.6.10`.
*   **IMPROVED** - add Emit Batch Behavior to **Lookup Plural** action
*   **IMPROVED** - add Emit Behavior to **Aggregate** and **Lookup Plural** actions
*   **IMPROVED** - input field positions corrected using an order rather than a weight factor.

### [Microsoft Dynamics CRM component](/components/msdynamics-crm/)

*   **NEW** - introducing new action **Query**.
*   **NEW** - introducing new action **Delete Object By ID**.
*   **NEW** - introducing new action **Bulk Create**.
*   **NEW** - introducing new action **Bulk Update**.
*   **NEW** - introducing new action **Bulk Delete**.
*   **NEW** - introducing new action **Lookup Objects**.
*   **IMPROVED** - new implementation **Upsert** action with image attachment support
*   **IMPROVED** - new implementation **Lookup Object** action with image attachment support

### [Marketo component](/components/marketo/)

*   **FIXED** -  the bug when query string exceeds 8K characters
*   **UPDATED** - component updated to use Node v14 and the dependencies are updated accordingly.
*   **UPDATED** - component logo was updated
*   **IMPROVED** - More clearly report HTTP level failures

### [SFTP Component](/components/sftp/)

*   **NEW** - introducing new action **Move File**.
*   **IMPROVED** - component performs better when trying to download large number of files.

### [Google Spreadsheets](/components/gspreadsheets/)

*   **NEW** - introducing support for OAuth clients. Changed the environment variable naming accordingly.
*   **UPDATED** - Node.js Sailor was updated to `2.6.9`.
*   **UPDATED** - metadata for **add new row** action.

### [Magento2 Component](/components/magento2/)

*   **NEW** - introducing new trigger **Bulk Extract**.
*   **NEW** - introducing new action **Lookup Objects**.
*   **NEW** - introducing new action **Lookup Set of Objects**.
*   **IMPROVED** - component now uses the new logger.
*   **IMPROVED** - replaces parameters in error messages when parameters are an object, not an array.

### [Amazon AWS S3 Component](/components/aws-s3/)

*   **NEW** - introducing new action **Upsert File**.
*   **UPDATED** - component updated to use Node v14 and the dependencies are updated accordingly.
*   **IMPROVED** - verify Credentials now checks for access to buckets.

### [SOAP Component](/components/soap/)

*   **IMPROVED** - input field positions corrected using an order rather than a weight factor.
