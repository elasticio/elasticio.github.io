---
title: Product Update - v21.14
description: Details of the product update v21.14 from 8th of April 2021.
layout: rel
version: "21.14"
section: Product Updates
category: product-updates
releaseDate: 2021-04-08
---


## Features


### "Grant Support Access" Button

- Add automated adding of predefined user into contract/workspace.
Here new field support_user_id was added to contract and tenant.
New API endpoint: PATCH /v2/workspaces/{WORKSPACE_ID}/members/support with an empty body, which adds support-user, which is defined in a contract or tenant to a workspace, as a member with "Owner" role. If support user is not a member of corresponding Contract he/she will be added to this Contract with owner role as well.
DELETE /v2/workspaces/{WORKSPACE_ID}/members/support - removes support_user from workspace and contract, in case if it was the last workspace in this contract for support_user.
New permission was added WORKSPACE.WORKSPACE.EDIT_MEMBERSHIP_SUPPORT
There is a new button on the Workspace Settings Page in case if support_user_id is set for the contract or tenant to which this workspace belongs.
New API-docs:


- Place intercom icon to the left bottom, on the panel.
Now you can place intercom icon on the left bottom, on the panel
Since we already have customNavItems in tenant config, this feature is enabled by specifying next custom navigation item:

{
  "icon" : "forum",
  "customClass" : "intercom-launcher"
}
To remind - order of items in the customNavItems is respected in frontend, so this item has to be the last in order to be placed right above the user profile navigation item




### Support disabled stats collection in Admiral.

To disable input/output message stats you can set flow's attributes.stats_enabled
flag to false.

If you want to disable stats for all newly created flows of a workspace/contract/tenant, set
attributes.flow_stats_enabled_default property of a target workspace/contract/tenant to false. This property is
cascade. E.g. if on flow creation it's not defined or true for workspace, we will look for contract. If it's not
defined or true for contract, we will look for tenant. If it's not defined or true for tenant, flow will have
attributes.stats_enabled = true. So we search upwards until see the first false, otherwise stats will be enabled.
New API-docs: https://api.elastic.io/docs/v2/#flows

- Switch for disabling stats in API.
Were added:
- Add stats_enabled field in the flow model
- Add boolean optional flow_stats_enabled_default field for workspace, contract, tenant
- Obtain default value from workspace.flow_stats_enabled_default, contract.flow_stats_enabled_default, tenant.flow_stats_enabled_default


### Add Possibility to remove component version from the platform.

- Implement DELETE /v2/components/{COMPONENT_ID}/versions/{GIT_REVISION}.
API docs: https://api.elastic.io/docs/v2/#delete-a-version-of-the-component

A version of the component may only be deleted if it not used in any flow.



## Improvements and Updates

### Add Flow Info to disable emails for limited workspace.
Added a link to the flow into the letter template wiper-stop-limited-flow



### Equip the platform with detailed error logging.
Now the platform stores response from the third-party system about problem with OAuth-secret in the db.

### Support disabling dynamic flow control in the API.
For a now works only with sailor-jvm 3.3.5 and higher

Added disable_dynamic_flow_control field into Flow's nodes_config which is validating according to sailor capabilities.

{
    "data": {
        "attributes": {
           "nodes_config": {
                "step_1": {
                    "disable_dynamic_flow_control": true
                }
            },
.......
- Support disabling dynamic flow control in Webhooks.
For a now works only with sailor-jvm 3.3.5 and higher

If disable_dynamic_flow_control in nodes_config set to true for first step then do not enable publisher confirms when publishing messages to first step Q

- Support disabling dynamic flow control in the Admiral.
For a now works only with sailor-jvm 3.3.5 and higher

If disable_dynamic_flow_control in nodes_config set to true then disable dynamic flow control for flow step and next mapper.

NOTE: ELASTICIO_AMQP_PUBLISH_CONFIRM_ENABLED value from repo env vars should be ignored completely.
if ELASTICIO_AMQP_PUBLISH_CONFIRM_ENABLED is set in repo env vars then it should not be present in step pod env vars (regardless of value) and admiral should have only nodes_config.disable_dynamic_flow_control value as source of truth

- Support disabling dynamic flow control in the UI.
For a now works only with sailor-jvm 3.3.5 and higher

Show switcher for disabling dynamic flow control feature under the "Advanced settings" in step config. Do not show this control if sailor version does not support it. Default - dynamic flow control is enabled.

{% if site.data.tenant.name == "elastic.io" %}

## OEM Related

News in this section are for our customers who use
[OEM version of the elastic.io platform](https://www.elastic.io/saas-embedded-integration/).

### Tenant Administration Improvements

With this release we introduce a new API endpoint (**GET** `/v2/components/all`) to list
all exiting components in the tenant. This endpoint returns all components regardless of
the set visibility level (`Team` or `Tenant`). You can use an optional filter (`?contract_id`)
with this endpoint to get components in the given contract.

In back-end part, we introduced a new `tenants.component.list_all` permission to
control who can sucsessfully use the `/v2/components/all` API endpoint. By default
the `tenantAdmin` role holder has this permission.


### Control running steps in contracts

We introduce a new configuration to the `quota-service` platform microservice to
contorl actively running integration flow steps in the contract. Here are the
details of the changes:

*   We added a new resource type `container` and
*   A new quota limit type called `per_contract_container_count_limit`


### Registration and login page improvements

We are working towards improving the registration and login pages. In this light,
we are introducing couple of new capabilities.

*   You can now define a unique logo for registration/login pages by adding a new `logoURL` parameter and point it the logo address you want to use. If you do not specify this parameter, the platform wiill use the standard `header_logo_url` value as fall-back.
*   You can now directly enable **Sign up with Google** or **Sign in with Google** options. You would need to provide the value for the `google_provider_id` parameter. If the value exist in the tenant configuration and it exist in the DB, then this will add an ability to authenticate with your Google account (register a new user and logging in the existed user).

You can use the following structure as en example to
[update the tenant configration]({{site.data.tenant.apiBaseUri}}/docs/v2/#update-a-tenant):

```json
{
  "data": {
    "type": "tenant",
    "attributes": {
      "signin_v_2" : {
        "logo_url": "https://cdn.example.com/logo-mini.png",
        "google_provider_id": "{{google_provider_id}}"
      }
    }
  }
}
```

### Intercom chat icon on the panel

Now you can place the Intercom Chat icon more prominently on the left-hand-side panel.
You can use the existing `customNavItems` capability and the following structure
while updating the tenant records:

```json
{
  "icon" : "forum",
  "customClass" : "intercom-launcher"
}
```
> Please note: If you need the Intercom Chat icon right above the user profile you must
> have this item the last listed in the `customNavItems` section in the tenant records.


### Use Google Tag Manager

You can now configure and use the Google Tag Manager services on your tenant.
To benefit from this, update the tenant record parameter `google_tag_manager_id`
value and add your google Tag Manager container ID without `GTM-` prefix:

```json
{
  "data": {
    "type": "tenant",
    "attributes": {
      "google_tag_manager_id":"XXXXXX"
    }
  }
}
```

{% endif %}

## Fixed Bugs

- We should reset section nodes_config for the deleted or changed step of a flow.
- Bran may execute more than one insert per CH_BATCH_INTERVAL into the same table.
- Prevent UI crashes after deleting secret which uses in the flow-draft.
- Sometimes when using components with custom metadata, saving flow updates takes way too long in the browser.


## Components

### Sailor version update in bulk

As a part of the component code audit we updated the Node.js Sailor version to
`2.6.24` in the following components:

*   [Docusign component](/components/docusign/)
*   [Microsoft OneDrive component](/components/onedrive/)
*   [Google PubSub component](/components/google-pubsub/)
*   [Open API Component](/components/open-api/)
*   [Ldap component](/components/ldap/)
*   [AMQP component](/components/amqp/)
